"use strict";(self.webpackChunktemplate_pixijs=self.webpackChunktemplate_pixijs||[]).push([[965],{7965:(t,e,i)=>{i.r(e),i.d(e,{Scene_Mobile:()=>g});var s=i(1971),n=i(5601);class h extends s.W20{constructor(t){super(),this.bufferTexts=[],this.bufferText="",this.displayingText="",this._nextCharCooldown=0,this._typingPromise=null,this._typingPromiseResolver=null,this._text=new s.xvT("",n.M.Window_Message),this.addChild(this._text),t&&(t.text&&this.appendText(t.text),t.texts&&t.texts.forEach((t=>this.appendText(t)))),console.log(this)}update(t){if(this.typing)if(this._nextCharCooldown>=0)this._nextCharCooldown-=t;else for(;this._nextCharCooldown<=0&&this.typing;)if(0===this.bufferText.length){if(0===this.bufferTexts.length)return this.typing=!1,void(this._typingPromiseResolver&&(this._typingPromiseResolver(),this._typingPromiseResolver=null));this.typing=!1}else this._text.text=`${this._text.text}${this.bufferText.at(0)}`,this.bufferText=this.bufferText.slice(1),console.log("[Sprite_TypingText] 目前文字",this._text,"剩餘文字",this.bufferText),this._nextCharCooldown+=1}nextSentence(){this._text.text="",this.bufferText=this.bufferTexts.shift(),this.typing=!0}appendText(t){this.bufferTexts.push(t),this.typing=!0,this._typingPromise=new Promise(((t,e)=>{this._typingPromiseResolver=t}))}waitForEmpty(){return this.typing||this.bufferTexts.length||this.bufferText?this._typingPromiseResolver:Promise.resolve()}IsSentenceCompleted(){return 0===this.bufferText.length}}var o=i(4972),r=i(7769),x=i(9512);class g extends o.x{constructor(){super(),this.bg=s.jyi.from(x.Z.Image.bgYellow),this.bg.anchor.set(.5),this.dragon=s.jyi.from(x.Z.Image.dragon),this.dragon.anchor.set(.5),this.typingText=new h({texts:["試著說第一句話","然後說第二句話","接著說第三句很長很長很長很長很長很長很長很長很長很長很長很長很長很長很長很長的話\n而且是有換行那種"]}),this.typingText.x=8,this.addChild(this.bg,this.dragon,this.typingText),this.interactive=!0,this.onclick=this.onClick.bind(this),console.log(this),this.onWindowResize(),document.addEventListener("resize",this.onWindowResize.bind(this),!0)}destroy(t){document.removeEventListener("resize",this.onWindowResize.bind(this),!0),super.destroy(t)}update(t){this.typingText.update(t)}onClick(t){this.typingText.nextSentence()}onWindowResize(){console.log("resize"),this.bg.x=r.Z.screen.width/2,this.bg.y=r.Z.screen.height/2,this.dragon.x=r.Z.screen.width/2,this.dragon.y=r.Z.screen.height/2,this.typingText.y=r.Z.screen.height-128}}},4972:(t,e,i)=>{i.d(e,{x:()=>h});var s=i(1971),n=i(5601);class h extends s.W20{constructor(){super(),this.hitArea=new s.AeJ(0,0,n.V.width,n.V.height)}onInit(){}onDestroy(){}update(t){}}}}]);